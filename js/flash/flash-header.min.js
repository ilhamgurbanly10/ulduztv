// onloading

const loadingAni = document.querySelector('.fl-loading-ani');

document.body.onload = function() {

	document.body.classList.remove('fl-page-is-not-loaded');
	if (loadingAni != undefined) loadingAni.classList.add('fl-stop');

	// posts

	$('.posts-list').slick({
	dots: false,
	autoplay: true,
	autoplaySpeed: 0,
	infinite: true,
	slidesToShow: 3,
	slidesToScroll: 1,
	speed: 6000,
	arrows: false,
	cssEase: 'linear',
	responsive: [
	  {
	    breakpoint: 1024,
	    settings: {
	      slidesToShow: 2,
	    }
	  },
	  {
	    breakpoint: 599,
	    settings: {
	      slidesToShow: 1,
	    }
	  }
	] 
	});

	// the-end-of-posts

}

// the-end-of-onloading



// using-functions

flashNavbar();

flashNavbarSearch();


// the-end-of-using-functions


// flash-navbar

function flashNavbar() {
	
	// elements-and-values
	const navbar = document.querySelector('.fl-navbar');
	const navbarToggler = document.querySelector('.fl-navbar-toggler');
	const smScreenMenu = document.querySelector('.fl-sm-screen-menu');
	var navDropdownTogglers = navbar.getElementsByClassName('fl-nav-dropdown-toggler');
	var smScreenMenuDropdownTogglers = smScreenMenu.getElementsByClassName('fl-sm-screen-menu-dropdown-toggler');
	var smScreenMenuDropdowns = smScreenMenu.getElementsByClassName('fl-sm-screen-dropdown-menu-con');
	var smScreenMenuOtherLinks = smScreenMenu.querySelectorAll('.fl-sm-screen-menu-link:not(.fl-sm-screen-menu-dropdown-toggler)');
	var isHovered = false;

	// functions
	function preventDefaultLinks() {

		for (var i = 0; i < navDropdownTogglers.length; i++) {

			navDropdownTogglers[i].onclick = function(event) { event.preventDefault(); }

		}

		for (var i = 0; i < smScreenMenuDropdownTogglers.length; i++) {

			smScreenMenuDropdownTogglers[i].onclick = function(event) { event.preventDefault(); }

		}

	}

	function toggle() {

		this.classList.toggle('fl-active');
		smScreenMenu.classList.toggle('fl-show');

		if (smScreenMenu.classList.contains('fl-show')) 
			document.documentElement.addEventListener('click', close);
		else 
			document.documentElement.removeEventListener('click', close);

	}

	function toggleDropdown() {

		const dropdown = this.parentElement.querySelector('.fl-sm-screen-dropdown-menu-con');

		dropdown.classList.toggle('fl-show');
		this.classList.toggle('fl-active');

		closeOtherDropdowns(dropdown);

	}	

	function closeOtherDropdowns(dropdown) {

		for (var x = 0; x < smScreenMenuDropdowns.length; x++) {
			
			if (smScreenMenuDropdowns[x] == dropdown) continue;

			smScreenMenuDropdowns[x].classList.remove('fl-show');
			smScreenMenuDropdownTogglers[x].classList.remove('fl-active');

		}

		deactiveOtherLinks();

	}

	function deactiveOtherLinks() { 

		for (var y = 0; y < smScreenMenuOtherLinks.length; y++) {
			smScreenMenuOtherLinks[y].classList.remove('fl-active');
		} 

	}

	function close() {

		if (!isHovered) {

			navbarToggler.classList.remove('fl-active');
			smScreenMenu.classList.remove('fl-show');
			document.documentElement.removeEventListener('click', close);

		}	

	}



	function mouseIsOver() { isHovered = true; }

	function mouseIsOut() { isHovered = false; }

	// adding-functions
	navbarToggler.addEventListener('click', toggle);

	navbarToggler.addEventListener('mouseover', mouseIsOver);
	navbarToggler.addEventListener('mouseout', mouseIsOut);
	smScreenMenu.addEventListener('mouseover', mouseIsOver);
	smScreenMenu.addEventListener('mouseout', mouseIsOut);

	for (var i = 0; i < smScreenMenuDropdownTogglers.length; i++) {

		smScreenMenuDropdownTogglers[i].addEventListener('click', toggleDropdown);

	}

	// using-functions
	preventDefaultLinks();

	// full-screen-menu
	if (smScreenMenu.classList.contains('fl-full-screen-sm-screen-menu')) {

		const smScreenMenuList = smScreenMenu.querySelector('.fl-sm-screen-menu-list');
		var smScreenMenuListIsHovered = false;

		function closeFullScreenMenu() {

			if (!smScreenMenuListIsHovered) {

				navbarToggler.classList.remove('fl-active');
				smScreenMenu.classList.remove('fl-show');
				
			}

		}


		function mouseIsOverOnList() { smScreenMenuListIsHovered = true; }

		function mouseIsOutFromList() { smScreenMenuListIsHovered = false; }

		smScreenMenu.addEventListener('click', closeFullScreenMenu);
		smScreenMenuList.addEventListener('mouseover', mouseIsOverOnList);
		smScreenMenuList.addEventListener('mouseout', mouseIsOutFromList);

	}

}



// the-end-of-flash-navbar



// flash-navbar-search

function flashNavbarSearch() {

	// elements-and-values
	const con = document.querySelector('.fl-navbar-search-parent-js');

	// avoiding-errors
	if (con == undefined) return;

	const form = con.querySelector('.fl-navbar-search');
	const input = form.querySelector('.fl-navbar-search-input');
	const showResults = form.getAttribute('show-results');
	const results = con.querySelector('.fl-navbar-results-of-search');
	const submit = form.querySelector('.fl-navbar-search-submit');
	const reset = form.querySelector('.fl-navbar-search-reset');

	const toggler = document.querySelector('.fl-navbar-search-toggler');
	const icon = con.querySelector('.fl-navbar-search-toggler .fa');
	var isHovered = true;

	// adding-functions
	if (showResults == "true") { 

		input.addEventListener('keyup', toggle);
		input.addEventListener('focusin', show);
		input.addEventListener('focusout', hide);

	} else {

		input.addEventListener('keyup', enableDisableButtons);
		
	}

	if (reset != undefined) reset.addEventListener('click', disableButtons);
	
	if (toggler) {

		toggler.addEventListener('click', toggleContainer);
		toggler.addEventListener('mouseover', mouseIsOver);
		toggler.addEventListener('mouseout', mouseIsOut);

	}
		
	con.addEventListener('mouseover', mouseIsOver);
	con.addEventListener('mouseout', mouseIsOut);

	if (showResults == "true") { 
		results.addEventListener('mouseover', mouseIsOver);
		results.addEventListener('mouseout', mouseIsOut);
	}	
	
	// functions
	function toggleContainer() {

		if (!con.classList.contains('fl-show'))
			document.documentElement.addEventListener('click', closeContainer);
		else
			document.documentElement.removeEventListener('click', closeContainer);

		this.classList.toggle('fl-active');
		con.classList.toggle('fl-show');
		toggleIcon();

	}



	function closeContainer() {

		if (!isHovered) {

			con.classList.remove('fl-show');
			document.documentElement.removeEventListener('click', closeContainer);

			if (toggler) toggler.classList.remove('fl-active');

			if (icon == undefined) return;

			icon.classList.add('fa-search');
			icon.classList.remove('fa-times');

		}	

	}

	function toggleIcon() {

		if (icon == undefined) return;

		icon.classList.toggle('fa-search');
		icon.classList.toggle('fa-times');

	}

	function mouseIsOver() { isHovered = true; }

	function mouseIsOut() { isHovered = false; }

	function toggle() {

		if (this.value != "") {

			results.classList.add('fl-show');
			enableSubmit();
			enableReset();

		} else { 

			hide();
			disableSubmit();
			disableReset();

		}	

	}

	function show() {

		if (this.value != "") { 

			results.classList.add('fl-show');
			enableSubmit();
			enableReset();

		}	


	}

	function hide() { results.classList.remove('fl-show'); }

	function enableSubmit() { submit.removeAttribute('disabled'); }

	function disableSubmit() { submit.setAttribute('disabled',''); }

	function enableReset() { if (reset != undefined) reset.removeAttribute('disabled'); }

	function disableReset() { if (reset != undefined) reset.setAttribute('disabled',''); }

	function disableButtons() {

		submit.setAttribute('disabled','');
		if (reset != undefined) reset.setAttribute('disabled','');
		input.value = "";

	}

	function enableDisableButtons() {

		if (this.value != "") {

			enableSubmit();
			enableReset();

		} else { 

			disableSubmit();
			disableReset();

		}

	}

}

// flash-navbar-search



// other-functions

function flashHideSmScreenMenu() {

	const navbarToggler = document.querySelector('.fl-navbar-toggler');
	const smScreenMenu = document.querySelector('.fl-sm-screen-menu');

	navbarToggler.classList.remove('fl-active');
	smScreenMenu.classList.remove('fl-show');

}

function flashNavbarAnimations() {

	const navbar = document.querySelector('.fl-navbar');
	var lastScrollTop;
	var scrollTop;

	const check = () => {

		scrollTop = document.body.scrollTop || document.documentElement.scrollTop;

		if (scrollTop > 1) navbar.classList.add('fl-new-styled-navbar');
		else navbar.classList.remove('fl-new-styled-navbar');
		
	}

	const flashSmartCheck = () => {

		scrollTop = document.body.scrollTop || document.documentElement.scrollTop;
		
		if (scrollTop == 0) { 
			navbar.classList.remove('fl-hidden-navbar');
			navbar.classList.remove('fl-new-styled-navbar');
		}
		else if (scrollTop > 1 && scrollTop >= lastScrollTop) { 
			navbar.classList.add('fl-hidden-navbar');
			navbar.classList.remove('fl-new-styled-navbar'); 
		}	
		else if (scrollTop < lastScrollTop) { 
			navbar.classList.remove('fl-hidden-navbar');
			navbar.classList.add('fl-new-styled-navbar'); 
		}	 

		lastScrollTop = scrollTop;	

	}

	window.addEventListener('scroll', flashSmartCheck);
	window.addEventListener('load', flashSmartCheck);

}

// the-end-of-other-functions